(window.webpackJsonp=window.webpackJsonp||[]).push([["chunk-263fbd6c"],{"0c32":function(t,e,o){"use strict";o.r(e);var r=o("c7eb"),s=o("1da1"),n=(o("e9c4"),o("ac1f"),o("00b4"),o("d9e2"),o("14d9"),function(){var t=this,e=t._self._c;return e("el-steps",{staticClass:"steps",attrs:{active:t.active,"align-center":!0,"finish-status":"success"}},t._l(t.titleList,(function(t,o){return e("el-step",{key:o,attrs:{title:t}})})),1)}),p=(o("a9e3"),{name:"Steps",props:{titleList:{type:Array,default:function(){return[]}},active:{required:!0,type:Number}}}),a=(o("2959"),o("2877")),i=Object(a.a)(p,n,[],!1,null,"371661d3",null).exports,c=o("107f"),u={name:"Apply",components:{Steps:i},data:function(){return{sysVersions:[],titleList:["填写订阅信息","完成"],active:0,productName:"",productApplyDto:{costumerName:"",industry:"",sysVersion:{},supplierCode:"",supplierId:"",describe:"",productCode:"",timeLength:"",protocolChecked:!1},rules:{costumerName:[{required:!0,message:"请输入客户名称"}],industry:[{required:!0,message:"请输入您的行业"}],sysVersion:[{required:!0,message:"请至少选择一个订阅版本"}],timeLength:[{required:!0,message:"请选择使用年限"}],describe:[{required:!0,message:"请填写业务介绍"}]},submitButtonLoading:!1,submitButtonDebounceTimer:null}},created:function(){var t=this;return Object(s.a)(Object(r.a)().mark((function e(){var o,s;return Object(r.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.productApplyDto.productCode=t.$route.params.productCode,t.licensePath="".concat(window.env.softwareLicense),o=t.productApplyDto.productCode,e.next=6,c.a.applyUse(o);case 6:s=e.sent,t.productName=s.data.productName,t.sysVersions=s.data.sysVersionReleases,t.productApplyDto.costumerName=s.data.supplierName,t.productApplyDto.supplierCode=s.data.supplierCode,t.productApplyDto.supplierId=s.data.supplierId;case 13:case"end":return e.stop()}}),e)})))()},methods:{handleChange:function(t,e){/[0-9]+/.test(t)||(t=e),t=Math.floor(t),this.productApplyDto.timeLength=t},goBack:function(){window.close()},onClickSubmitButton:function(t){var e=this;this.$refs[t].validate(function(){var t=Object(s.a)(Object(r.a)().mark((function t(o){return Object(r.a)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!o){t.next=5;break}clearTimeout(e.submitButtonDebounceTimer),e.submitButtonDebounceTimer=setTimeout(Object(s.a)(Object(r.a)().mark((function t(){var o,s,n,p,a,i,u,l,d,m,y,b;return Object(r.a)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.submitButtonLoading=!0,o=e.productApplyDto,s=o.timeLength,n=o.costumerName,p=o.industry,a=o.sysVersion,i=o.supplierId,u=o.supplierCode,l=o.describe,d=e.$route.params.productCode,m=a.id,y=a.versionCode,b={productReleaseCode:d,timeLength:s,costumerName:n,industry:p,sysVersionReleaseId:m,sysVersionReleaseCode:y,supplierId:i,supplierCode:u,describe:l},t.next=7,c.a.nextStep(b).catch((function(t){throw e.submitButtonLoading=!1,new Error("onClickSubmitButton, ".concat(t))}));case 7:t.sent&&e.$router.push({name:"Result",params:{productCode:e.$route.params.productCode}}),e.submitButtonLoading=!1;case 10:case"end":return t.stop()}}),t)}))),300),t.next=6;break;case 5:return t.abrupt("return",!1);case 6:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())}}},l=u,d=(o("53d8"),Object(a.a)(l,(function(){var t=this,e=t._self._c;return e("div",{staticClass:"my-wrap my-pd"},[e("div",{staticClass:"apply-column"},[t._m(0),e("Steps",{attrs:{active:t.active,titleList:t.titleList}}),e("div",{staticClass:"apply-wrapper"},[e("p",{staticClass:"apply-title"},[t._v("请仔细填写订阅信息")]),e("el-form",{ref:"productApplyDto",attrs:{model:t.productApplyDto,rules:t.rules,"label-width":"120px"}},[e("el-form-item",{attrs:{label:"客户名称:",prop:"costumerName"}},[e("span",[t._v(t._s(t.productApplyDto.costumerName))])]),e("el-form-item",{attrs:{label:"您的行业:",prop:"industry"}},[e("el-input",{attrs:{placeholder:"您的行业"},model:{value:t.productApplyDto.industry,callback:function(e){t.$set(t.productApplyDto,"industry",t._n(e))},expression:"productApplyDto.industry"}})],1),e("el-form-item",{attrs:{label:"订购产品:",prop:"productCode"}},[e("span",[t._v(t._s(t.productName))])]),e("el-form-item",{attrs:{label:"订阅版本:",prop:"sysVersion"}},[e("el-select",{attrs:{"value-key":"id",placeholder:"请选择版本"},model:{value:t.productApplyDto.sysVersion,callback:function(e){t.$set(t.productApplyDto,"sysVersion",e)},expression:"productApplyDto.sysVersion"}},t._l(t.sysVersions,(function(t){return e("el-option",{key:t.versionCode,attrs:{label:t.versionName,value:{id:t.id,versionCode:t.versionCode}}})})),1)],1),e("el-form-item",{attrs:{label:"使用年限:",prop:"timeLength"}},[t._v(" 使用年限 "),e("el-input-number",{attrs:{precision:0,min:1,max:10},on:{change:t.handleChange},model:{value:t.productApplyDto.timeLength,callback:function(e){t.$set(t.productApplyDto,"timeLength",t._n(e))},expression:"productApplyDto.timeLength"}}),t._v(" 年 ")],1),e("el-form-item",{attrs:{label:"业务介绍:",prop:"describe"}},[e("el-input",{attrs:{rows:3,maxlength:"200",placeholder:"业务介绍",resize:"none","show-word-limit":"",type:"textarea"},model:{value:t.productApplyDto.describe,callback:function(e){t.$set(t.productApplyDto,"describe",e)},expression:"productApplyDto.describe"}})],1),e("el-form-item",{attrs:{prop:"protocolChecked"}},[e("el-checkbox",{staticClass:"my-checkbox",model:{value:t.productApplyDto.protocolChecked,callback:function(e){t.$set(t.productApplyDto,"protocolChecked",e)},expression:"productApplyDto.protocolChecked"}},[t._v("已阅读并同意")]),e("span",[e("router-link",{staticStyle:{color:"#3c6ef0"},attrs:{target:"_blank",to:{path:this.licensePath}}},[t._v("《京东物流软件服务许可协议》")])],1)],1)],1),e("div",{staticClass:"apply-footer",attrs:{slot:"footer"},slot:"footer"},[e("el-button",{on:{click:t.goBack}},[t._v("取 消")]),e("el-button",{attrs:{loading:t.submitButtonLoading,disabled:!this.productApplyDto.protocolChecked,type:"primary"},on:{click:function(e){return t.onClickSubmitButton("productApplyDto")}}},[t._v("下一步")])],1)],1)],1)])}),[function(){var t=this._self._c;return t("h3",{staticClass:"title"},[t("span",[this._v("申请使用")])])}],!1,null,"d49ec394",null));e.default=d.exports},2959:function(t,e,o){"use strict";o("739e")},3536:function(t,e,o){},"53d8":function(t,e,o){"use strict";o("3536")},"739e":function(t,e,o){}}]);
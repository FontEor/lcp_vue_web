(window.webpackJsonp=window.webpackJsonp||[]).push([["chunk-1d1e2d5e"],{2269:function(e,t,r){"use strict";r("2d84")},"2d84":function(e,t,r){},b9f2:function(e,t,r){"use strict";r.r(t),r("b0c0");var a=r("c7eb"),n=r("1da1"),s=(r("a9e3"),r("d9e2"),r("14d9"),r("b32d")),o=r("6aca"),i=r("a78e"),c=r.n(i),u=r("ddf6"),l={name:"ChooseSupplier",data:function(){return{teamList:[],showtips:!1,tips:"",form:{info:""},rules:{info:[{required:!0,message:"请选择登录团队"}]},teamForm:{name:""},teamRules:{name:[{required:!0,message:"请输入新的团队名称",trigger:"blur"},{min:2,max:30,message:"长度在2到30个字符",trigger:"blur"}]},isShowTeamForm:!1}},computed:{user_develop:function(){return o.a.user_develop},supplierId:function(){return Number(c.a.get("supplierId"))}},methods:{saveDeveloper:function(){return Object(n.a)(Object(a.a)().mark((function e(){return Object(a.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,u.a.user.saveDeveloper().catch((function(e){throw new Error("saveDeveloper, ".concat(e))}));case 2:case"end":return e.stop()}}),e)})))()},submitForm:function(e){var t=this;this.$refs[e].validate((function(e){if(!e)return!1;t.chooseSupplier(t.form.info)}))},chooseSupplier:function(e){var t=this;return Object(n.a)(Object(a.a)().mark((function r(){var n,o;return Object(a.a)().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return n=e.id,o=e.code,r.prev=1,r.next=4,Object(s.a)({url:"/user/chooseSupplier",method:"get",params:{supplierId:n}});case 4:return c.a.set("supplierId",n),c.a.set("groupCode",o),r.next=8,t.updateUserInfo();case 8:t.gotoNewLink(),r.next=14;break;case 11:r.prev=11,r.t0=r.catch(1);case 14:case"end":return r.stop()}}),r,null,[[1,11]])})))()},handleGetTeamListInfo:function(){var e=this;return Object(n.a)(Object(a.a)().mark((function t(){return Object(a.a)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Object(s.a)({url:"/user/getTeamListInfo",method:"post"}).then((function(t){e.teamList=t.data,e.form.info=e.teamList[0]})).catch((function(e){}));case 2:case"end":return t.stop()}}),t)})))()},updateUserInfo:function(){return Object(n.a)(Object(a.a)().mark((function e(){return Object(a.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=3,Object(s.a)("/hrInfo/getUserInfo").then((function(e){c.a.set("supplierId",e.data.supplierId),o.a.SET_USER_DEVELOP(e.data.develop)})).catch((function(e){}));case 3:case"end":return e.stop()}}),e)})))()},gotoNewLink:function(){var e=o.a.redirectUrl||"",t=sessionStorage.getItem("redirectNextLink"),r=e.indexOf("home");t?window.location.href=t:e&&-1==r?-1!==e.indexOf("/#/chooseSupplier")&&-1!==location.href.indexOf("/#/chooseSupplier")?this.$router.push("/home"):window.location.href=e:this.$router.push("/home")},closeWarnning:function(){this.showtips=!1},showTeamBox:function(){this.isShowTeamForm=!0},prevTeamForm:function(){this.isShowTeamForm=!1,this.teamForm.name=""},createTeam:function(e){var t=this;return Object(n.a)(Object(a.a)().mark((function r(){return Object(a.a)().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:t.$refs[e].validate(function(){var e=Object(n.a)(Object(a.a)().mark((function e(r){return Object(a.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!r){e.next=14;break}return e.prev=1,e.next=4,Object(s.a)({url:"/supplier/createCustomizeTeam",method:"post",params:{name:t.teamForm.name}});case 4:t.$message.success("创建成功！"),t.isShowTeamForm=!1,t.handleGetTeamListInfo(),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(1);case 12:e.next=16;break;case 14:return e.abrupt("return",!1);case 16:case"end":return e.stop()}}),e,null,[[1,9]])})));return function(t){return e.apply(this,arguments)}}());case 1:case"end":return r.stop()}}),r)})))()}},created:function(){var e=this;return Object(n.a)(Object(a.a)().mark((function t(){return Object(a.a)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.saveDeveloper();case 2:return t.next=4,e.handleGetTeamListInfo();case 4:case"end":return t.stop()}}),t)})))()}},m=l,f=(r("2269"),r("2877")),p=Object(f.a)(m,(function(){var e=this,t=e._self._c;return t("div",{staticClass:"login-index"},[e._m(0),t("div",{staticClass:"con-box"},[t("div",{staticClass:"con-left"}),t("div",{staticClass:"logo-form"},[this.showtips?t("p",{staticClass:"warning-info cbox"},[t("i",{staticClass:"el-icon-warning"}),t("span",{staticClass:"info flex1"},[e._v(e._s(e.tips))]),t("i",{staticClass:"el-icon-close",on:{click:e.closeWarnning}})]):e._e(),t("h3",{staticClass:"title"},[e._v("选择登录团队")]),t("el-form",{ref:"form",attrs:{model:e.form,rules:e.rules}},[t("el-form-item",{attrs:{prop:"info"}},[t("el-select",{attrs:{"value-key":"id",placeholder:"团队名称",size:"big"},model:{value:e.form.info,callback:function(t){e.$set(e.form,"info",t)},expression:"form.info"}},e._l(e.teamList,(function(e){return t("el-option",{key:e.id,attrs:{label:e.name,value:e}})})),1)],1),t("div",{staticClass:"create"},[t("el-button",{attrs:{type:"text"},on:{click:e.showTeamBox}},[e._v("创建团队")])],1),t("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.submitForm("form")}}},[e._v("登录")])],1)],1),e.isShowTeamForm?t("div",{staticClass:"logo-form team-form"},[t("h3",{staticClass:"title"},[e._v("创建团队")]),t("el-form",{ref:"teamForm",attrs:{model:e.teamForm,rules:e.teamRules}},[t("el-form-item",{attrs:{prop:"name"}},[t("el-input",{attrs:{placeholder:"请输入团队名称",size:"big"},model:{value:e.teamForm.name,callback:function(t){e.$set(e.teamForm,"name",t)},expression:"teamForm.name"}})],1),t("div",{staticClass:"btn-box"},[t("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.createTeam("teamForm")}}},[e._v("创建")]),t("el-button",{on:{click:e.prevTeamForm}},[e._v("上一步")])],1)],1)],1):e._e()])])}),[function(){var e=this._self._c;return e("header",{staticClass:"login-head"},[e("div",{staticClass:"cbox head-con"},[e("h1",{staticClass:"logo ti"},[this._v("JDL京东物流")])])])}],!1,null,"490d8f7a",null);t.default=p.exports}}]);
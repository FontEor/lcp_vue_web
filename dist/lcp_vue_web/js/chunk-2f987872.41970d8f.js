(window.webpackJsonp=window.webpackJsonp||[]).push([["chunk-2f987872"],{"2ddb":function(e,t,n){"use strict";n("7880")},4308:function(e,t,n){},"5ec8":function(e,t,n){},7880:function(e,t,n){},8127:function(e,t,n){"use strict";n("c6bb")},b593:function(e,t,n){},c6bb:function(e,t,n){},fd6a:function(e,t,n){"use strict";var i=n("c7eb"),o=n("1da1"),a=(n("a9e3"),function(){var e=this;return(0,e._self._c)("el-link",{staticClass:"link",attrs:{type:e.type,underline:e.underline,disabled:e.disabled,href:e.href,icon:e.icon,target:e.target}},[e._t("default")],2)}),u={name:"Link",props:{type:{type:String,default:"primary"},underline:{type:Boolean,default:!1},disabled:{type:Boolean,default:!1},href:{type:String,default:""},icon:{type:String,default:""},target:{type:String,default:"_blank"}}},r=(n("8127"),n("2877")),s=Object(r.a)(u,a,[],!1,null,"20cfe9c1",null).exports,l=(n("498a"),function(){var e=this,t=e._self._c;return t("el-dialog",{staticClass:"dialog-document-feedback",attrs:{visible:e.dialogVisible,"close-on-click-modal":!1,title:"提交文档反馈意见",width:"640px"},on:{close:e.onCloseDialog},scopedSlots:e._u([{key:"footer",fn:function(){return[t("el-button",{on:{click:e.onClickCancelButton}},[e._v("取消")]),t("el-button",{attrs:{loading:e.confirmSubmitButtonLoading,type:"primary"},on:{click:e.onClickConfirmSubmitButton}},[e._v("确认提交")])]},proxy:!0}])},[t("el-form",{ref:"form",attrs:{model:e.formModel,rules:e.formRules,"label-width":"100px"}},[t("el-form-item",{attrs:{label:"原因",prop:"questionCause"}},[t("el-select",{staticStyle:{width:"100%"},attrs:{placeholder:"请选择问题原因"},model:{value:e.formModel.questionCause,callback:function(t){e.$set(e.formModel,"questionCause",t)},expression:"formModel.questionCause"}},e._l(e.questionCauseOptionList,(function(e){var n=e.value,i=e.label;return t("el-option",{key:n,attrs:{label:i,value:n}})})),1)],1),t("el-form-item",{attrs:{label:"描述",prop:"questionDesc"}},[t("el-input",{staticStyle:{width:"100%"},attrs:{rows:5,maxlength:500,"show-word-limit":"",type:"textarea",resize:"none",placeholder:"请描述您在使用本文档过程中遇到的问题"},model:{value:e.formModel.questionDesc,callback:function(t){e.$set(e.formModel,"questionDesc","string"==typeof t?t.trim():t)},expression:"formModel.questionDesc"}})],1)],1)],1)}),c=(n("d9e2"),n("d984")),d=n("6aca"),b=n("2ef0"),p={name:"DialogDocumentFeedback",props:{dialogVisible:{type:Boolean,required:!0},objId:{type:Number,required:!0},docTypeMain:{type:Number,required:!0},bizUnitId:{type:Number}},data:function(){return{formModel:{questionCause:void 0,questionDesc:""},formRules:{questionCause:[{required:!0,message:"请选择问题原因"}],questionDesc:[{required:!0,message:"请描述您在使用本文档过程中遇到的问题"}]},questionCauseOptionList:[{label:"内容不详细",value:1},{label:"文档更新不及时",value:2},{label:"内容有误",value:3},{label:"视觉体验差",value:4},{label:"其他",value:5}],confirmSubmitButtonLoading:!1}},methods:{submitQuestion:function(){var e=this;return Object(o.a)(Object(i.a)().mark((function t(){var n,o,a,u,r,s,l,b;return Object(i.a)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=e.objId,o=e.docTypeMain,a=e.bizUnitId,u=e.formModel,r=u.questionCause,s=u.questionDesc,0,l=d.a.user_pin||void 0,b={objId:n,whetherHelp:0,docTypeMain:o,bizUnitId:a,questionCause:r,questionDesc:s,createUser:l},t.next=7,c.a.evaluate.submitQuestion(b);case 7:return t.abrupt("return",t.sent);case 8:case"end":return t.stop()}}),t)})))()},handleSubmitQuestion:function(){var e=this;return Object(o.a)(Object(i.a)().mark((function t(){return Object(i.a)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.submitQuestion().catch((function(e){throw e}));case 2:case"end":return t.stop()}}),t)})))()},onCloseDialog:function(){this.$refs.form.resetFields(),this.$emit("update:dialogVisible",!1)},onClickCancelButton:function(){this.onCloseDialog()},onClickConfirmSubmitButton:Object(b.debounce)(Object(o.a)(Object(i.a)().mark((function e(){var t=this;return Object(i.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.$refs.form.validate().catch((function(){throw new Error("未通过表单校验")}));case 2:return this.confirmSubmitButtonLoading=!0,e.next=5,this.handleSubmitQuestion().catch((function(e){throw t.confirmSubmitButtonLoading=!1,e}));case 5:this.confirmSubmitButtonLoading=!1,this.onCloseDialog(),this.$emit("submit");case 8:case"end":return e.stop()}}),e,this)}))),300)}},f=p,m=(n("fea0"),Object(r.a)(f,l,[],!1,null,"65a05601",null)).exports,h=(n("5ec8"),n("b593"),{name:"ScreenshotEvaluation",components:{Link:s,DialogDocumentFeedback:m},props:{objId:{type:Number,required:!0},docTypeMain:{type:Number,required:!0},bizUnitId:{type:Number},inline:{type:Boolean,default:!1},helpful:{type:void 0|Boolean,required:!0},buttonLoading:{type:Boolean,required:!0},evaluationButtonDisabled:{type:Boolean,required:!0}},data:function(){return{dialogDocumentFeedbackVisible:!1}},computed:{helpfulButtonPlain:function(){var e=this.helpful;return"boolean"!=typeof e||!e},helplessButtonPlain:function(){var e=this.helpful;return"boolean"!=typeof e||e},buttonSize:function(){return this.inline?"mini":"small"}},methods:{submitQuestion:function(){var e=this;return Object(o.a)(Object(i.a)().mark((function t(){var n,o,a,u,r;return Object(i.a)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=e.objId,o=e.docTypeMain,a=e.bizUnitId,1,u=d.a.user_pin||void 0,r={objId:n,whetherHelp:1,docTypeMain:o,bizUnitId:a,createUser:u},t.next=6,c.a.evaluate.submitQuestion(r);case 6:return t.abrupt("return",t.sent);case 7:case"end":return t.stop()}}),t)})))()},handleSubmitQuestion:function(){var e=this;return Object(o.a)(Object(i.a)().mark((function t(){return Object(i.a)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.submitQuestion().catch((function(e){throw e}));case 2:case"end":return t.stop()}}),t)})))()},toggleHelpful:function(e){this.$emit("update:helpful",e),this.$emit("update:evaluationButtonDisabled",!0)},onClickHelpfulButton:Object(b.debounce)(Object(o.a)(Object(i.a)().mark((function e(){var t=this;return Object(i.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.$emit("update:buttonLoading",!0),e.next=3,this.handleSubmitQuestion().catch((function(e){throw t.$emit("update:buttonLoading",!1),e}));case 3:this.$emit("update:buttonLoading",!1),this.toggleHelpful(!0);case 5:case"end":return e.stop()}}),e,this)})))),onClickHelplessButton:function(){this.dialogDocumentFeedbackVisible=!0},onSubmitDialog:function(){this.toggleHelpful(!1)}}}),v=h,g=(n("2ddb"),Object(r.a)(v,(function(){var e=this,t=e._self._c;return t("div",{staticClass:"screenshot-evaluation",class:{inline:e.inline}},[t("p",[e._v("本篇文档是否有帮助？")]),t("div",{staticClass:"screenshot-evaluation__button-wrapper"},[t("el-button",{attrs:{loading:e.buttonLoading,disabled:e.evaluationButtonDisabled,plain:e.helpfulButtonPlain,size:e.buttonSize,type:"primary",icon:"icon-thumbs-up"},on:{click:e.onClickHelpfulButton}},[e._v(" 有帮助 ")]),t("el-button",{attrs:{loading:e.buttonLoading,disabled:e.evaluationButtonDisabled,plain:e.helplessButtonPlain,size:e.buttonSize,type:"primary",icon:"icon-thumbs-down"},on:{click:e.onClickHelplessButton}},[e._v(" 无帮助 ")])],1),e.inline?e._e():t("p",[e._v("接入过程中遇到问题，您可以通过"),t("Link",{attrs:{href:"/admin/#/upgrade/work-order"}},[e._v("提交工单")]),e._v("的方式获得帮助")],1),t("DialogDocumentFeedback",{attrs:{dialogVisible:e.dialogDocumentFeedbackVisible,objId:e.objId,docTypeMain:e.docTypeMain,bizUnitId:e.bizUnitId},on:{"update:dialogVisible":function(t){e.dialogDocumentFeedbackVisible=t},"update:dialog-visible":function(t){e.dialogDocumentFeedbackVisible=t},submit:e.onSubmitDialog}})],1)}),[],!1,null,"ba8c7b3a",null));t.a=g.exports},fea0:function(e,t,n){"use strict";n("4308")}}]);